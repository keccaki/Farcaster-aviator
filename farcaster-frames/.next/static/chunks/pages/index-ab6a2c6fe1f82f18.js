(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(6209)}])},6209:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(5893),l=s(7294);let n=()=>{let[e,t]=(0,l.useState)({status:"waiting",multiplier:1,roundId:"",currentBets:[],isLoading:!0}),[s,n]=(0,l.useState)(1e3),[i,r]=(0,l.useState)(10);(0,l.useEffect)(()=>{(async()=>{try{console.log("Mini App initializing..."),window.farcasterSDK&&await window.farcasterSDK.actions.ready(),await c(),console.log("Mini App initialized successfully!")}catch(e){console.error("Failed to initialize Mini App:",e),await c()}})()},[]);let c=async()=>{try{let e=await fetch("/api/game/state"),s=await e.json();s.success&&t({...s.data,isLoading:!1})}catch(e){console.error("Failed to fetch game state:",e),t(e=>({...e,isLoading:!1}))}},d=async()=>{try{let t=await fetch("/api/game/bet",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fid:12345,amount:i,roundId:e.roundId})}),s=await t.json();s.success&&(n(s.data.newBalance),await c(),console.log("Bet placed successfully:",s.data))}catch(e){console.error("Failed to place bet:",e)}},o=async()=>{try{let t=await fetch("/api/game/cashout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fid:12345,betId:"bet_12345_".concat(e.roundId),multiplier:e.multiplier})}),s=await t.json();s.success&&(n(s.data.newBalance),await c(),console.log("Cash out successful:",s.data))}catch(e){console.error("Failed to cash out:",e)}};return e.isLoading?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-white text-xl",children:"Loading game..."})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white",children:[(0,a.jsxs)("div",{className:"text-center py-6",children:[(0,a.jsx)("h1",{className:"text-7xl font-bold mb-3",children:"\uD83D\uDE80 AVIATOR"}),(0,a.jsx)("h2",{className:"text-4xl font-semibold mb-2 text-yellow-300",children:"CRASH GAME"}),(0,a.jsx)("p",{className:"text-2xl text-green-300 font-medium",children:"Ready to Fly!"}),(0,a.jsx)("p",{className:"text-lg text-gray-200 mt-2",children:"Click Play to start betting!"})]}),(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("div",{className:"text-8xl font-bold mb-4 ".concat((()=>{switch(e.status){case"flying":return"text-yellow-400";case"crashed":return"text-red-400";default:return"text-green-400"}})()),children:(()=>{switch(e.status){case"flying":return"\uD83D\uDE80 FLYING!";case"crashed":return"\uD83D\uDCA5 CRASHED!";default:return"✈️ Ready to Fly!"}})()}),"flying"===e.status&&(0,a.jsxs)("div",{className:"text-9xl font-bold text-orange-400 mb-4 animate-pulse",children:[e.multiplier.toFixed(2),"x"]}),"crashed"===e.status&&(0,a.jsxs)("div",{className:"text-6xl text-red-400 mb-4",children:["Crashed at ",e.multiplier.toFixed(2),"x"]})]}),(0,a.jsx)("div",{className:"text-center mb-6",children:(0,a.jsxs)("p",{className:"text-gray-200 text-2xl font-medium",children:["waiting"===e.status&&"Place your bet and watch the multiplier climb!","flying"===e.status&&"Cash out before the crash!","crashed"===e.status&&"Next round starting soon..."]})}),(0,a.jsx)("div",{className:"bg-white/10 backdrop-blur-lg mx-4 rounded-2xl p-6 mb-6 border border-white/20",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-300 text-xl mb-2",children:"Your Balance"}),(0,a.jsxs)("div",{className:"text-4xl font-bold text-green-400",children:["$",s]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-300 text-xl mb-2",children:"Round ID"}),(0,a.jsx)("div",{className:"text-2xl font-mono",children:e.roundId.slice(-8)})]})]})}),(0,a.jsx)("div",{className:"px-4 mb-6",children:(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-gray-300 text-2xl mb-3 font-medium",children:"Bet Amount"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("input",{type:"number",value:i,onChange:e=>r(Math.max(1,parseInt(e.target.value)||1)),className:"flex-1 bg-white/20 text-white px-6 py-4 rounded-xl text-2xl font-bold text-center border border-white/30",min:"1",max:s}),(0,a.jsx)("span",{className:"text-gray-300 text-2xl font-bold",children:"$"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:["waiting"===e.status&&(0,a.jsxs)("button",{onClick:d,disabled:i>s,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold py-6 px-8 rounded-xl text-3xl transition-all duration-300 transform hover:scale-105 disabled:scale-100 shadow-lg",children:["\uD83C\uDFAE PLACE BET $",i]}),"flying"===e.status&&(0,a.jsxs)("button",{onClick:o,className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-6 px-8 rounded-xl text-3xl animate-pulse transition-all duration-300 transform hover:scale-105 shadow-lg",children:["\uD83D\uDCB8 CASH OUT ",e.multiplier.toFixed(2),"x"]}),"crashed"===e.status&&(0,a.jsx)("button",{onClick:c,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-6 px-8 rounded-xl text-3xl transition-all duration-300 transform hover:scale-105 shadow-lg",children:"\uD83D\uDE80 NEXT ROUND"})]})]})}),e.currentBets&&e.currentBets.length>0&&(0,a.jsx)("div",{className:"px-4 mb-8",children:(0,a.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Active Bets"}),(0,a.jsx)("div",{className:"space-y-2",children:e.currentBets.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center bg-slate-700 px-4 py-2 rounded",children:[(0,a.jsx)("span",{children:e.username}),(0,a.jsxs)("span",{className:"font-bold",children:["$",e.amount]})]},t))})]})}),(0,a.jsx)("div",{className:"text-center py-6 text-gray-400",children:(0,a.jsx)("p",{className:"text-lg",children:"Powered by Farcaster Mini Apps"})})]})};function i(){return(0,a.jsx)(n,{})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);