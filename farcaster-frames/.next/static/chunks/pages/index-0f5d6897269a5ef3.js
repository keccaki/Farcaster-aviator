(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(6209)}])},6209:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return r}});var s=a(5893),l=a(7294);let n=()=>{let[e,t]=(0,l.useState)({status:"waiting",multiplier:1,roundId:"",currentBets:[],isLoading:!0}),[a,n]=(0,l.useState)(1e3),[r,i]=(0,l.useState)(10),[c,d]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=async e=>{console.log("SDK Ready event received:",e.detail);try{let t=e.detail;t&&t.actions&&t.actions.ready?(console.log("Calling sdk.actions.ready()..."),await t.actions.ready(),console.log("✅ SDK ready() called successfully!")):console.warn("SDK actions not available"),d(!0)}catch(e){console.error("SDK ready() failed:",e),d(!0)}};{window.addEventListener("farcasterSDKReady",e),window.farcasterSDK&&e({detail:window.farcasterSDK});let t=setTimeout(()=>{!c&&window.farcasterSDK?(console.log("Fallback: Attempting to call SDK ready()..."),e({detail:window.farcasterSDK})):c||(console.log("Fallback: No SDK available, allowing app to work anyway"),d(!0))},3e3);return()=>{clearTimeout(t),window.removeEventListener("farcasterSDKReady",e)}}},[]);let o=async()=>{try{let e=await fetch("/api/game/state"),a=await e.json();a.success&&t({...a.data,isLoading:!1})}catch(e){console.error("Failed to fetch game state:",e),t(e=>({...e,isLoading:!1}))}},x=async()=>{try{let t=await fetch("/api/game/bet",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fid:12345,amount:r,roundId:e.roundId})}),a=await t.json();a.success&&(n(a.data.newBalance),await o(),console.log("Bet placed successfully:",a.data))}catch(e){console.error("Failed to place bet:",e)}},u=async()=>{try{let t=await fetch("/api/game/cashout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fid:12345,betId:"bet_12345_".concat(e.roundId),multiplier:e.multiplier})}),a=await t.json();a.success&&(n(a.data.newBalance),await o(),console.log("Cash out successful:",a.data))}catch(e){console.error("Failed to cash out:",e)}};return e.isLoading?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-white text-xl",children:"Loading game..."})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white",children:[(0,s.jsxs)("div",{className:"text-center py-6",children:[(0,s.jsx)("h1",{className:"text-7xl font-bold mb-3",children:"\uD83D\uDE80 AVIATOR"}),(0,s.jsx)("h2",{className:"text-4xl font-semibold mb-2 text-yellow-300",children:"CRASH GAME"}),(0,s.jsx)("p",{className:"text-2xl text-green-300 font-medium",children:"Ready to Fly!"}),(0,s.jsx)("p",{className:"text-lg text-gray-200 mt-2",children:"Click Play to start betting!"})]}),(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"text-8xl font-bold mb-4 ".concat((()=>{switch(e.status){case"flying":return"text-yellow-400";case"crashed":return"text-red-400";default:return"text-green-400"}})()),children:(()=>{switch(e.status){case"flying":return"\uD83D\uDE80 FLYING!";case"crashed":return"\uD83D\uDCA5 CRASHED!";default:return"✈️ Ready to Fly!"}})()}),"flying"===e.status&&(0,s.jsxs)("div",{className:"text-9xl font-bold text-orange-400 mb-4 animate-pulse",children:[e.multiplier.toFixed(2),"x"]}),"crashed"===e.status&&(0,s.jsxs)("div",{className:"text-6xl text-red-400 mb-4",children:["Crashed at ",e.multiplier.toFixed(2),"x"]})]}),(0,s.jsx)("div",{className:"text-center mb-6",children:(0,s.jsxs)("p",{className:"text-gray-200 text-2xl font-medium",children:["waiting"===e.status&&"Place your bet and watch the multiplier climb!","flying"===e.status&&"Cash out before the crash!","crashed"===e.status&&"Next round starting soon..."]})}),(0,s.jsx)("div",{className:"bg-white/10 backdrop-blur-lg mx-4 rounded-2xl p-6 mb-6 border border-white/20",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6 text-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-gray-300 text-xl mb-2",children:"Your Balance"}),(0,s.jsxs)("div",{className:"text-4xl font-bold text-green-400",children:["$",a]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-gray-300 text-xl mb-2",children:"Round ID"}),(0,s.jsx)("div",{className:"text-2xl font-mono",children:e.roundId.slice(-8)})]})]})}),(0,s.jsx)("div",{className:"px-4 mb-6",children:(0,s.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-gray-300 text-2xl mb-3 font-medium",children:"Bet Amount"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("input",{type:"number",value:r,onChange:e=>i(Math.max(1,parseInt(e.target.value)||1)),className:"flex-1 bg-white/20 text-white px-6 py-4 rounded-xl text-2xl font-bold text-center border border-white/30",min:"1",max:a}),(0,s.jsx)("span",{className:"text-gray-300 text-2xl font-bold",children:"$"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:["waiting"===e.status&&(0,s.jsxs)("button",{onClick:x,disabled:r>a,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold py-6 px-8 rounded-xl text-3xl transition-all duration-300 transform hover:scale-105 disabled:scale-100 shadow-lg",children:["\uD83C\uDFAE PLACE BET $",r]}),"flying"===e.status&&(0,s.jsxs)("button",{onClick:u,className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-6 px-8 rounded-xl text-3xl animate-pulse transition-all duration-300 transform hover:scale-105 shadow-lg",children:["\uD83D\uDCB8 CASH OUT ",e.multiplier.toFixed(2),"x"]}),"crashed"===e.status&&(0,s.jsx)("button",{onClick:o,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-6 px-8 rounded-xl text-3xl transition-all duration-300 transform hover:scale-105 shadow-lg",children:"\uD83D\uDE80 NEXT ROUND"})]})]})}),e.currentBets&&e.currentBets.length>0&&(0,s.jsx)("div",{className:"px-4 mb-8",children:(0,s.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Active Bets"}),(0,s.jsx)("div",{className:"space-y-2",children:e.currentBets.map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between items-center bg-slate-700 px-4 py-2 rounded",children:[(0,s.jsx)("span",{children:e.username}),(0,s.jsxs)("span",{className:"font-bold",children:["$",e.amount]})]},t))})]})}),(0,s.jsx)("div",{className:"text-center py-6 text-gray-400",children:(0,s.jsx)("p",{className:"text-lg",children:"Powered by Farcaster Mini Apps"})})]})};function r(){return(0,s.jsx)(n,{})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);