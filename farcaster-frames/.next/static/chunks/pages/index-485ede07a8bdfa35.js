(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(6209)}])},6209:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(5893),l=s(7294),n=s(557);function i(){let[e,t]=(0,l.useState)({status:"waiting",multiplier:1,roundId:"",currentBets:[],isLoading:!0}),[s,i]=(0,l.useState)(1e3),[c,r]=(0,l.useState)(10);(0,l.useEffect)(()=>{(async()=>{try{await n.SZ.actions.ready(),await d(),console.log("Mini App initialized successfully!")}catch(e){console.error("Failed to initialize Mini App:",e);try{await n.SZ.actions.ready()}catch(e){console.error("Failed to call ready():",e)}}})()},[]);let d=async()=>{try{let e=await fetch("/api/game/state"),s=await e.json();s.success&&t({...s.data,isLoading:!1})}catch(e){console.error("Failed to fetch game state:",e),t(e=>({...e,isLoading:!1}))}},o=async()=>{try{let t=await fetch("/api/game/bet",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fid:12345,amount:c,roundId:e.roundId})}),s=await t.json();s.success&&(i(s.data.newBalance),await d(),console.log("Bet placed successfully:",s.data))}catch(e){console.error("Failed to place bet:",e)}},u=async()=>{try{let t=await fetch("/api/game/cashout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fid:12345,betId:"bet_12345_".concat(e.roundId),multiplier:e.multiplier})}),s=await t.json();s.success&&(i(s.data.newBalance),await d(),console.log("Cash out successful:",s.data))}catch(e){console.error("Failed to cash out:",e)}};return e.isLoading?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-white text-xl",children:"Loading game..."})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-white",children:[(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"\uD83D\uDE80 AVIATOR CRASH GAME"}),(0,a.jsx)("p",{className:"text-slate-300",children:"by keccak"})]}),(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"text-6xl font-bold mb-4 ".concat((()=>{switch(e.status){case"flying":return"text-yellow-400";case"crashed":return"text-red-400";default:return"text-green-400"}})()),children:(()=>{switch(e.status){case"flying":return"\uD83D\uDE80 FLYING!";case"crashed":return"\uD83D\uDCA5 CRASHED!";default:return"✈️ Ready to Fly!"}})()}),"flying"===e.status&&(0,a.jsxs)("div",{className:"text-5xl font-bold text-orange-400 mb-2",children:[e.multiplier.toFixed(2),"x"]}),"crashed"===e.status&&(0,a.jsxs)("div",{className:"text-3xl text-red-400 mb-2",children:["Crashed at ",e.multiplier.toFixed(2),"x"]})]}),(0,a.jsx)("div",{className:"text-center mb-8",children:(0,a.jsxs)("p",{className:"text-slate-300 text-lg",children:["waiting"===e.status&&"Place your bet and watch the multiplier climb!","flying"===e.status&&"Cash out before the crash!","crashed"===e.status&&"Next round starting soon..."]})}),(0,a.jsx)("div",{className:"bg-slate-800 mx-4 rounded-lg p-6 mb-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-slate-400",children:"Your Balance"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-green-400",children:["$",s]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-slate-400",children:"Round ID"}),(0,a.jsx)("div",{className:"text-lg",children:e.roundId.slice(-8)})]})]})}),(0,a.jsx)("div",{className:"px-4 mb-8",children:(0,a.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-slate-400 mb-2",children:"Bet Amount"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("input",{type:"number",value:c,onChange:e=>r(Math.max(1,parseInt(e.target.value)||1)),className:"flex-1 bg-slate-700 text-white px-4 py-3 rounded-lg text-lg",min:"1",max:s}),(0,a.jsx)("span",{className:"text-slate-400",children:"$"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:["waiting"===e.status&&(0,a.jsxs)("button",{onClick:o,disabled:c>s,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-slate-600 disabled:cursor-not-allowed text-white font-bold py-4 px-6 rounded-lg text-lg transition-colors",children:["\uD83C\uDFAE Place Bet $",c]}),"flying"===e.status&&(0,a.jsxs)("button",{onClick:u,className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-4 px-6 rounded-lg text-lg animate-pulse transition-colors",children:["\uD83D\uDCB8 Cash Out at ",e.multiplier.toFixed(2),"x"]}),"crashed"===e.status&&(0,a.jsx)("button",{onClick:d,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-lg text-lg transition-colors",children:"\uD83D\uDE80 Wait for Next Round"})]})]})}),e.currentBets&&e.currentBets.length>0&&(0,a.jsx)("div",{className:"px-4 mb-8",children:(0,a.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Active Bets"}),(0,a.jsx)("div",{className:"space-y-2",children:e.currentBets.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center bg-slate-700 px-4 py-2 rounded",children:[(0,a.jsx)("span",{children:e.username}),(0,a.jsxs)("span",{className:"font-bold",children:["$",e.amount]})]},t))})]})}),(0,a.jsx)("div",{className:"text-center py-8 text-slate-500",children:(0,a.jsx)("p",{children:"Powered by Farcaster Mini Apps"})})]})}},6601:function(){}},function(e){e.O(0,[766,931,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);