(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[243],{67:e=>{"use strict";e.exports=require("node:async_hooks")},195:e=>{"use strict";e.exports=require("node:buffer")},280:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l}),s(639);var n=s(458),a=s(161),o=s(278);async function r(e){if("GET"!==e.method)return new Response(JSON.stringify({success:!1,error:"Method not allowed"}),{status:405,headers:{"Content-Type":"application/json"}});try{let e=["waiting","flying","crashed"],t=e[Math.floor(Date.now()/1e4)%e.length],s=1,n=null;if("flying"===t){let e=Date.now()%1e4/1e3;s=1+.5*e,n=Math.max(0,10-e)}else"crashed"===t&&(s=1+Date.now()%1e4/1e3*.5);let a="crashed"!==t?[{user_id:1,username:"Player1",amount:10,auto_cashout:2.5},{user_id:2,username:"Player2",amount:25,auto_cashout:null}]:[],o={success:!0,data:{status:t,multiplier:parseFloat(s.toFixed(2)),round_id:Math.floor(Date.now()/3e4).toString(),time_remaining:n,current_bets:a,total_bets:a.length,total_bet_amount:a.reduce((e,t)=>e+t.amount,0)},timestamp:new Date().toISOString()};return new Response(JSON.stringify(o),{status:200,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, OPTIONS","Access-Control-Allow-Headers":"Content-Type"}})}catch(e){return console.error("Game state error:",e),new Response(JSON.stringify({success:!0,data:{status:"waiting",multiplier:1,round_id:Date.now().toString(),current_bets:[],total_bets:0,total_bet_amount:0},timestamp:new Date().toISOString()}),{status:200,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, OPTIONS","Access-Control-Allow-Headers":"Content-Type"}})}}function l(e){return(0,n.C)({...e,IncrementalCache:a.k,page:"/api/game/state",handler:(0,o.fd)("/api/game/state",r)})}}},e=>{var t=t=>e(e.s=t);e.O(0,[730],()=>t(280));var s=e.O();(_ENTRIES="undefined"==typeof _ENTRIES?{}:_ENTRIES)["middleware_pages/api/game/state"]=s}]);
//# sourceMappingURL=state.js.map